version: '3.8'

services:
  staticsend:
    build: .
    ports:
      - "8080:8080"
    environment:
      - PORT=8080
      - DATABASE_PATH=/app/data/staticsend.db
      - EMAIL_HOST=localhost
      - EMAIL_PORT=587
      - EMAIL_USERNAME=
      - EMAIL_PASSWORD=
      - EMAIL_FROM=noreply@example.com
      - EMAIL_USE_TLS=true
      - TURNSTILE_PUBLIC_KEY=
      - TURNSTILE_SECRET_KEY=
      - JWT_SECRET_KEY=your-secret-key-change-this
      - REGISTRATION_ENABLED=true
    volumes:
      - staticsend_data:/app/data
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:8080/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

volumes:
  staticsend_data:
